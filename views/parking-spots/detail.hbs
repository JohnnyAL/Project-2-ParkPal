<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>

<h2>{{spot.name}}</h2>
<h3>Price (per hour): {{spot.price}}</h3>

<br>

<p>Description: {{spot.description}}</p>

<br>

<p>Address:</p>
<p>{{spot.streetAddress}}</p>
<p>{{spot.city}}, {{spot.state}} {{spot.zipCode}}, {{spot.country}}</p>

<br>

<p>Size: {{spot.size}}</p>
<p>Type: {{spot.type}}</p>

<br>

<p>Availability</p>
<p>From: {{spot.startTime}}</p>
<p>To: {{spot.endTime}}</p>

<br>

<p>Posted by {{spot.owner.username}}</p>

{{!-- <h2>Comments</h2>
<div id="comment-box">
  {{#each room.comments}}
  <p>{{content}} <i>{{author.username}}</i></p>
  {{/each}}
</div> --}}

{{!-- 
{{#if user}}
<form>
  <label for="message">Add a comment</label>
  <input type="text" name="content" id="message">
  <button type="submit">Send</button>
</form>
{{/if}} --}}

{{#if showEdit}}
<a href="/parking-spots/edit/{{spot._id}}">Edit this posting</a>
{{/if}}

<br>

{{#if showDelete}}
<a href="/parking-spots/delete/{{spot._id}}">Delete this posting</a>
{{/if}}

<br>

<a href="/parking-spots/list">Back to List</a>

<br>

<div id='map' style='width: 400px; height: 300px;'></div>

<script>
  let spotDetail = {{{ spotDetail }}}
  mapboxgl.accessToken = 'pk.eyJ1Ijoiam9obm55YWwiLCJhIjoiY2s2ZmQyM29pMHBsNzNlbnZxamNxNTRoYSJ9.27j6sVOZDtK2BXTcKqnEcw';
  let map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [spotDetail.geoLocation.coordinates[0], spotDetail.geoLocation.coordinates[1]],
    zoom: 9,
    attributionControl: false
  });

  const nav = new mapboxgl.NavigationControl();
  map.addControl(nav, "top-right"); // where map refers to the name of our instance of Map  

  window.onload = () => {
    const marker = new mapboxgl.Marker({
      draggable: false// we can set a marker to be draggable (we'll see how that is useful), default is false
    });
    marker.setLngLat([spotDetail.geoLocation.coordinates[0], spotDetail.geoLocation.coordinates[1]]);
    marker.addTo(map);
  }

</script>